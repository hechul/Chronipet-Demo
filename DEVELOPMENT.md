# Chronipet ê°œë°œ ì§„í–‰ ìƒí™©

## ì™„ë£Œëœ ì‘ì—…ë“¤

### Phase 1: í”„ë¡œì íŠ¸ ì´ˆê¸° êµ¬ì„± âœ…

#### Step 1: Nuxt.js + TypeScript í”„ë¡œì íŠ¸ ìƒì„± âœ…
**ëª©í‘œ**: í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ ê¸°ì´ˆ êµ¬ì„±
**ì„¤ëª…**: 
- Nuxt.js 4 (Vue 3 ê¸°ë°˜)ë¥¼ í”„ë¡œì íŠ¸ ê¸°ì´ˆë¡œ ì‚¬ìš©
- TypeScriptë¡œ íƒ€ì… ì•ˆì „ì„± í™•ë³´
- ìë™ ë¼ìš°íŒ…, SSR ì¤€ë¹„, ì„±ëŠ¥ ìµœì í™” ë“±ì„ ê¸°ë³¸ìœ¼ë¡œ ì œê³µ

**ìƒì„±ëœ ê²ƒë“¤**:
- `app.vue` - ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
- `nuxt.config.ts` - Nuxt ì„¤ì • íŒŒì¼
- `tsconfig.json` - TypeScript ì„¤ì •
- `package.json` - ì˜ì¡´ì„± ê´€ë¦¬

---

#### Step 2: Supabase í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ âœ…
**ëª©í‘œ**: ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ì—°ë™ ì¤€ë¹„
**ì„¤ëª…**:
- `@supabase/supabase-js` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥:
  - **Auth**: Supabase ì¸ì¦ ì‹œìŠ¤í…œ (íšŒì›ê°€ì…, ë¡œê·¸ì¸, ì„¸ì…˜ ê´€ë¦¬)
  - **Database**: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ (CRUD)
  - **Storage**: íŒŒì¼/ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ê´€ë¦¬
  - **Realtime**: ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…

**ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€**:
- `@supabase/supabase-js@2.90.1`

---

#### Step 3: Supabase í”„ë¡œì íŠ¸ ìƒì„± ë° í™˜ê²½ ë³€ìˆ˜ ì„¤ì • âœ…
**ëª©í‘œ**: ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± ë° ë³´ì•ˆ ì„¤ì •
**ì„¤ëª…**:
- Supabase í´ë¼ìš°ë“œì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
- PostgreSQL ë°ì´í„°ë² ì´ìŠ¤, ì¸ì¦ ì‹œìŠ¤í…œ, ìŠ¤í† ë¦¬ì§€ ìë™ ì œê³µ
- API Key ë°œê¸‰ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ ì ‘ê·¼ ê¶Œí•œ íšë“
- `.env.local` íŒŒì¼ì— ë¹„ë°€ ì €ì¥ (Gitì—ì„œ ì œì™¸)

**ì„¤ì •ëœ í™˜ê²½ ë³€ìˆ˜** (`.env.local`):
```
NUXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NUXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
```

**ì™œ ë¶„ë¦¬í• ê¹Œ?**
- `NUXT_PUBLIC_` ì ‘ë‘ì‚¬ = í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- `.env.local` = Gitì—ì„œ ì œì™¸ (API Key ìœ ì¶œ ë°©ì§€)

---

#### Step 4: ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ SQL ì‹¤í–‰ âœ…
**ëª©í‘œ**: PostgreSQLì— 9ê°œ í…Œì´ë¸” ìƒì„± ë° ìë™í™” í•¨ìˆ˜ ì„¤ì •
**ì„¤ëª…**:

**í…Œì´ë¸” 9ê°œ** (ê´€ê³„ë„):
```
users (ì‚¬ìš©ì)
â”œâ”€â”€ dogs (ë°˜ë ¤ê²¬)
â”œâ”€â”€ reviews (ë¦¬ë·°/ìŠ¤í† ë¦¬)
â”‚   â”œâ”€â”€ reviews_products (ë¦¬ë·°ì— í¬í•¨ëœ ì œí’ˆë“¤)
â”‚   â”‚   â””â”€â”€ products (í«í‘¸ë“œ ì œí’ˆ)
â”‚   â”œâ”€â”€ reviewimages (ë¦¬ë·° ì‚¬ì§„)
â”‚   â”œâ”€â”€ comments (ëŒ“ê¸€)
â”‚   â”‚   â””â”€â”€ replies (ëŒ€ëŒ“ê¸€)
â”‚   â””â”€â”€ users_reviews_likes (ì¢‹ì•„ìš”)
â””â”€â”€ products (í«í‘¸ë“œ ì œí’ˆ)
```

**ìë™í™”ëœ ê¸°ëŠ¥ë“¤** (íŠ¸ë¦¬ê±° & í•¨ìˆ˜):

| í•¨ìˆ˜ëª… | ì—­í•  | ì–¸ì œ ì‘ë™ |
|--------|------|----------|
| `update_timestamp()` | `updated_at` ìë™ ê°±ì‹  | ë°ì´í„° ìˆ˜ì •í•  ë•Œ |
| `record_deleted_at()` | Soft Delete ì‹œ ì‚­ì œ ì‹œê°„ ê¸°ë¡ | `is_deleted = true`ì¼ ë•Œ |
| `handle_new_user()` | íšŒì›ê°€ì… ì‹œ users í…Œì´ë¸”ì— ìë™ ì¶”ê°€ | Authì— ìƒˆ ì‚¬ìš©ì ë“±ë¡ |
| `update_product_rating()` | ì œí’ˆ í‰ì  ìë™ ê³„ì‚° | ë¦¬ë·°ì˜ ì œí’ˆí‰ì  ë³€ê²½ |
| `sync_review_like_count()` | ì¢‹ì•„ìš” ìˆ˜ ìë™ ë™ê¸°í™” | ì¢‹ì•„ìš” ì¶”ê°€/ì œê±° |
| `change_representative_image()` | ëŒ€í‘œ ì‚¬ì§„ ì•ˆì „ êµì²´ | ì‚¬ìš©ì ìš”ì²­ ì‹œ |

**RLS (Row Level Security) ì •ì±…**:
- ì‚­ì œëœ ë°ì´í„°ëŠ” ì¿¼ë¦¬ì—ì„œ ìë™ ì œì™¸ (`is_deleted = false` í•„í„°)
- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- ê³µê°œ ë°ì´í„°ëŠ” ëˆ„êµ¬ë‚˜ ì¡°íšŒ ê°€ëŠ¥

---

#### Step 5: Git ì €ì¥ì†Œ ì´ˆê¸°í™” & GitHub ì—°ê²° âœ…
**ëª©í‘œ**: ë²„ì „ ê´€ë¦¬ ë° íŒ€ í˜‘ì—… ì¤€ë¹„
**ì„¤ëª…**:

**Local Git** (ì»´í“¨í„°):
- `.git` í´ë” ìƒì„±ìœ¼ë¡œ ë¡œì»¬ ë²„ì „ ê´€ë¦¬ ì‹œì‘
- íŒŒì¼ ë³€ê²½ ì´ë ¥ ì¶”ì 
- `.gitignore`ì— `.env.local` ë“± ë¯¼ê° ì •ë³´ ì œì™¸

**GitHub Remote** (í´ë¼ìš°ë“œ):
- ì›ê²© ì €ì¥ì†Œ ìƒì„±ìœ¼ë¡œ ë°±ì—… ë° íŒ€ í˜‘ì—… ê°€ëŠ¥
- `git push`ë¡œ ë¡œì»¬ ë³€ê²½ì‚¬í•­ì„ í´ë¼ìš°ë“œì— ë™ê¸°í™”

**ì²« ì»¤ë°‹**:
```
chore: Initialize Chronipet project with Nuxt, TypeScript, and Supabase setup
```

---

## í˜„ì¬ ì§„í–‰ ì¤‘

### Phase 2: ë°±ì—”ë“œ ê¸°ë³¸ ë¡œì§

#### Step 1: Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” âœ… **ì™„ë£Œ**

**ëª©í‘œ**: Nuxt ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Supabaseë¥¼ ì–´ë””ì„œë‚˜ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •

**ì™œ í•„ìš”í•œê°€?**
- Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§¤ë²ˆ ì§ì ‘ ìƒì„±í•˜ë©´ ë¹„íš¨ìœ¨ì 
- ì¤‘ë³µ ìƒì„± ë°©ì§€, ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì ˆì•½
- íƒ€ì… ì•ˆì „ì„± í™•ë³´ (TypeScript)
- í™˜ê²½ ë³€ìˆ˜ë¥¼ ëŸ°íƒ€ì„ì— ìë™ìœ¼ë¡œ ì½ê¸°

**í•  ì¼**:

1. **`utils/supabase.ts` ìƒì„±** (ìƒˆë¡œìš´ íŒŒì¼)
   ```typescript
   import { createClient } from '@supabase/supabase-js'
   
   const supabaseUrl = useRuntimeConfig().public.supabaseUrl
   const supabaseAnonKey = useRuntimeConfig().public.supabaseAnonKey
   
   export const supabase = createClient(supabaseUrl, supabaseAnonKey)
   ```
   
   **ì„¤ëª…**:
   - `useRuntimeConfig()` = Nuxtì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ëŸ°íƒ€ì„ì— ì½ê¸°
   - `createClient()` = Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„±
   - `export const supabase` = ì „ì—­ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë‚´ë³´ë‚´ê¸°
   
   ì´ íŒŒì¼ì„ í†µí•´ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë“  `import { supabase } from '@/utils/supabase'`ë¡œ ì‚¬ìš© ê°€ëŠ¥

2. **`nuxt.config.ts` ì—…ë°ì´íŠ¸** (ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •)
   ```typescript
   export default defineNuxtConfig({
     runtimeConfig: {
       public: {
         supabaseUrl: process.env.NUXT_PUBLIC_SUPABASE_URL,
         supabaseAnonKey: process.env.NUXT_PUBLIC_SUPABASE_ANON_KEY
       }
     },
     compatibilityDate: '2024-04-03'
   })
   ```
   
   **ì„¤ëª…**:
   - `runtimeConfig.public` = ë¹Œë“œ ì‹œì ì´ ì•„ë‹ˆë¼ ëŸ°íƒ€ì„(ì„œë²„ ì‹œì‘)ì— í™˜ê²½ ë³€ìˆ˜ ì½ê¸°
   - `.env.local`ì˜ ê°’ì„ ìë™ìœ¼ë¡œ ì½ìŒ
   - ê°œë°œ ì¤‘ì— `.env.local` ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜

**ê²°ê³¼**:
- Supabase í´ë¼ì´ì–¸íŠ¸ê°€ ì¤€ë¹„ë˜ì–´ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¸ì¦ ë¡œì§ì„ êµ¬í˜„ ê°€ëŠ¥
- ì–´ë–¤ í˜ì´ì§€/ì»´í¬ë„ŒíŠ¸ì—ì„œë“  ë™ì¼í•œ Supabase ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©

**ë‹¤ìŒ ë‹¨ê³„ ë¯¸ë¦¬ë³´ê¸°**:
- Step 2: íšŒì›ê°€ì…/ë¡œê·¸ì¸ ë¡œì§ (Auth)
- Step 3: ê¸°ë³¸ CRUD í•¨ìˆ˜ë“¤ ì‘ì„±
- Step 4: API ë¼ìš°íŠ¸ ë˜ëŠ” ì»´í¬ì €ë¸” ìƒì„±

---

## ì§„í–‰ ì¼ì •

| ì™„ë£Œ | Phase | ëª©í‘œ | ìƒíƒœ |
|------|-------|------|------|
| âœ… | Phase 1 | í”„ë¡œì íŠ¸ ì´ˆê¸° êµ¬ì„± | ì™„ë£Œ |
| ğŸ”„ | Phase 2 | ë°±ì—”ë“œ ê¸°ë³¸ ë¡œì§ | ì§„í–‰ ì¤‘ (1/5) |
| â³ | Phase 3 | ì´ë¯¸ì§€ & ë¦¬ë·° ì‘ì„± | ì˜ˆì • |
| â³ | Phase 4 | ëŒ“ê¸€ & ì¢‹ì•„ìš” | ì˜ˆì • |
| â³ | Phase 5 | í”„ë¡ íŠ¸ì—”ë“œ UI/UX | ì˜ˆì • |
| â³ | Phase 6 | ìµœì í™” & ë°°í¬ | ì˜ˆì • |

---

## ê¸°ìˆ  ìŠ¤íƒ ì •ë¦¬

| ë ˆì´ì–´ | ê¸°ìˆ  | ë²„ì „ | ì—­í•  |
|--------|------|------|------|
| **Frontend** | Nuxt.js | 4.2.2 | Vue 3 ê¸°ë°˜ SSR/SPA í”„ë ˆì„ì›Œí¬ |
| **Frontend** | Vue.js | 3.5.26 | UI ë Œë”ë§ |
| **Frontend** | TypeScript | Latest | íƒ€ì… ì•ˆì „ì„± |
| **Backend** | Supabase | Cloud | PostgreSQL + Auth + Storage |
| **Database** | PostgreSQL | Cloud | ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ |
| **Auth** | Supabase Auth | Cloud | OAuth, Email/Password ì¸ì¦ |
| **Storage** | Supabase Storage | Cloud | ì´ë¯¸ì§€/íŒŒì¼ ì €ì¥ |
| **Deployment** | Vercel | Cloud | Nuxt í˜¸ìŠ¤íŒ… |
| **Version Control** | Git + GitHub | Latest | ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬ |

